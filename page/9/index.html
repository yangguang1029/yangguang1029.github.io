<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" name="viewport" />
  <title>
    

    typo
  </title>

  
  <link rel="shortcut icon" href="/icon.svg">
  

  <link rel="preconnect" href="https://cdnjs.cloudflare.com">
  

  <!-- 字体 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&display=swap" rel="stylesheet">

  
<link rel="stylesheet" href="/css/root.css">

  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/post.css">

<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <header class="header">
  <section class="header-container">
    <a class="logo" href="/">杨光的日记本</a>
    <ul class="nav">
      
      <li><a href="/archives">archives</a></li>
      
      <li><a href="/about">about</a></li>
      
    </ul>
  </section>
</header>
  <main class="main">
    <div class="post-list">
  
  <section class="post-item">
    <a class="post-item-title" href="/2016/11/28/cocos-jpgmaskpng2/">cocos之使用jpg+mask合成png实现方式（二）</a>
    <div class="post-item-summary">
      第二种方式就是使用shader，这种方式的优点是不需要修改源代码，但性能上不如第一种方式。
编写shader涉及到顶点着色器和片断着色器，前者使用sprite默认的即可。sprite使用哪个着色器，只要看一下CCSprite.cpp里这句就找到了
1setGLProgramState(GLProgramState::getOrCreateWithGLProgramName(GLProgram::SHADER_NAME_POSITION_TEXTURE_COLOR_NO_MVP
      <a class="read-more" href="/2016/11/28/cocos-jpgmaskpng2/"> ... </a>
    </div>
    <div class="post-item-extra">
      <div class="date">2016.11.28</div>
      <div class="tags">
        
        <div class="tag-item">cocos</div>
        
      </div>
    </div>
  </section>
  
  <section class="post-item">
    <a class="post-item-title" href="/2016/11/28/cocos-jpgmaskpng/">cocos之使用jpg+mask合成png实现方式（一）</a>
    <div class="post-item-summary">
      第一种方式，在CCImage内读取图片数据后，合并起来使用。改写Image类，增加initWithJpgAndPng方法
代码如下
1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859bool Image::initWithJpgAndPng(const std::string&amp; jpgpath, con
      <a class="read-more" href="/2016/11/28/cocos-jpgmaskpng/"> ... </a>
    </div>
    <div class="post-item-extra">
      <div class="date">2016.11.28</div>
      <div class="tags">
        
        <div class="tag-item">cocos</div>
        
      </div>
    </div>
  </section>
  
  <section class="post-item">
    <a class="post-item-title" href="/2016/11/25/cocos-render/">cocos3.x 渲染机制简述</a>
    <div class="post-item-summary">
      cocos2dx-3.x对绘制部分进行了重构，将绘制从UI树的遍历中分离了出来。首先进行UI树的遍历给每个元素生成一个绘制命令。等遍历完之后，render开始执行栈中所有renderCommand。
遍历UI树遍历UI树很简单，就是调用每个Node的visit函数，这是个虚函数，除了部分类做了重写(目前源代码里只有三个类重写了，分别是CCAttachNode, CCBillBoard, CCSprite3D)，其余就沿用了Node的实现。通过
1void Node::visi
      <a class="read-more" href="/2016/11/25/cocos-render/"> ... </a>
    </div>
    <div class="post-item-extra">
      <div class="date">2016.11.25</div>
      <div class="tags">
        
        <div class="tag-item">cocos</div>
        
      </div>
    </div>
  </section>
  
  <section class="post-item">
    <a class="post-item-title" href="/2016/11/25/cocos-addImageAsync/">cocos-addImageAsync解析</a>
    <div class="post-item-summary">
      当我们在cocos内需要做一些比较耗性能的事情时，我们可以一些很巧妙地方案，例如开启多线程，以及将任务分解到每一帧完成一部分。在TextureCache的addImageAsync方法里，就同时用到了这两种办法，把这部分源码看明白，对自己实现能有很大的帮助
类TextureCache维护一个队列_asyncStructQueue，它存放需要执行的任务，这些任务将在异步线程执行，加载生成Image类
1std::queue&lt;AsyncStruct*&gt;* _async
      <a class="read-more" href="/2016/11/25/cocos-addImageAsync/"> ... </a>
    </div>
    <div class="post-item-extra">
      <div class="date">2016.11.25</div>
      <div class="tags">
        
        <div class="tag-item">cocos</div>
        
      </div>
    </div>
  </section>
  
  <section class="post-item">
    <a class="post-item-title" href="/2016/11/24/cocos%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90%E5%8A%A0%E5%AF%86/">cocos图片资源加密</a>
    <div class="post-item-summary">
      无意中看到hnliu’sblog上的方案，看完思路后，自己也照着写了一个，虽然不复杂，但是也花了将近两个小时。
python代码如下
12345678910111213141516171819202122232425262728293031323334353637383940414243import osimport randomENCRYPTBYTE = random.randint(1,255)	#不能随机到0，否则等于没加密FIRSTBYTE = 0x12SECONDB
      <a class="read-more" href="/2016/11/24/cocos%E5%9B%BE%E7%89%87%E8%B5%84%E6%BA%90%E5%8A%A0%E5%AF%86/"> ... </a>
    </div>
    <div class="post-item-extra">
      <div class="date">2016.11.24</div>
      <div class="tags">
        
        <div class="tag-item">cocos</div>
        
      </div>
    </div>
  </section>
  
  <section class="post-item">
    <a class="post-item-title" href="/2016/11/24/js-object/">javaScript中的proto</a>
    <div class="post-item-summary">
      __proto__js的原型链继承很简单，对任意一个object，都有__proto__属性，当获取这个对象的属性或者方法时，现在对象本身去查找，如果不存在，则往它的__proto__上查找，因为__proto__本身也是一个object，所以如果没找到，则往__proto__的__proto__上查找，跟沿着一条链条走一样，直到找到返回，或者__proto__为null或undefined找到了尽头。
原型链不可能无止尽的延伸，所以js中有一个默认的object，它的__p
      <a class="read-more" href="/2016/11/24/js-object/"> ... </a>
    </div>
    <div class="post-item-extra">
      <div class="date">2016.11.24</div>
      <div class="tags">
        
        <div class="tag-item">javascript</div>
        
      </div>
    </div>
  </section>
  
  <section class="post-item">
    <a class="post-item-title" href="/2016/11/18/js%E5%AF%B9%E8%B1%A1%E4%B8%8E%E7%BB%A7%E6%89%BF2/">js对象与继承(二)</a>
    <div class="post-item-summary">
      类继承与原型继承先分别举个例子吧，首先是原型继承
1234567var proto = &#123;&quot;a&quot;:1,&quot;b&quot;:&#123;&quot;c&quot;:2&#125;&#125;var f1 = function()&#123;&#125;var f2 = function()&#123;&#125;f1.prototype = protof2.prototype = protovar t1 = new f1()var t2 =
      <a class="read-more" href="/2016/11/18/js%E5%AF%B9%E8%B1%A1%E4%B8%8E%E7%BB%A7%E6%89%BF2/"> ... </a>
    </div>
    <div class="post-item-extra">
      <div class="date">2016.11.18</div>
      <div class="tags">
        
        <div class="tag-item">javascript</div>
        
      </div>
    </div>
  </section>
  
  <section class="post-item">
    <a class="post-item-title" href="/2016/11/18/js%E5%AF%B9%E8%B1%A1%E4%B8%8E%E7%BB%A7%E6%89%BF/">js对象与继承(一)</a>
    <div class="post-item-summary">
      大家都知道在js中创建一个对象的一种很基本的方式
1234function f()&#123;	this.a = 1;&#125;var test = new f();

当执行new的时候，系统实际做的事情分了几步

var obj &#x3D; Object.create(f.prototype)
var result &#x3D; f.call(obj)
result &amp;&amp; typeof result &#x3D;&#x3D;&#x3D; ‘object
      <a class="read-more" href="/2016/11/18/js%E5%AF%B9%E8%B1%A1%E4%B8%8E%E7%BB%A7%E6%89%BF/"> ... </a>
    </div>
    <div class="post-item-extra">
      <div class="date">2016.11.18</div>
      <div class="tags">
        
        <div class="tag-item">javascript</div>
        
      </div>
    </div>
  </section>
  
  <section class="post-item">
    <a class="post-item-title" href="/2016/11/17/svnignore/">svn忽略文件</a>
    <div class="post-item-summary">
      在svn项目中，对于不需要加入版本管理的文件，可以使用svn propedit svn:ignore来进行设置
在执行这句之前，需要先设置好SVN_EDITOR环境变量，例如在~&#x2F;.bash_profile内添加
1export SVN_EDITOR=emacs

然后执行
1svn propedit svn:ignore .
这里的.表示对当前目录进行设置，此时会打开你指定的编辑器界面，在里面写上你需要忽略的文件名或者正则表达式即可.但这句命令，只会影响你指定的路
      <a class="read-more" href="/2016/11/17/svnignore/"> ... </a>
    </div>
    <div class="post-item-extra">
      <div class="date">2016.11.17</div>
      <div class="tags">
        
        <div class="tag-item">svn</div>
        
      </div>
    </div>
  </section>
  
  <section class="post-item">
    <a class="post-item-title" href="/2016/11/16/cocos%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D%E7%AD%96%E7%95%A5/">cocos屏幕适配策略</a>
    <div class="post-item-summary">
      cocos的屏幕适配包括两个方面，一个涉及到屏幕的宽高比，一个涉及到缩放因子。
宽高比我打算尽量用通俗的语言来说这件事情，cocos处理不同宽高比的适配，使用了设计分辨率这么个东西，就是
1void GLView::setDesignResolutionSize(float width, float height, ResolutionPolicy resolutionPolicy)
resolutionPolicy有好几种选择，但我们通常只使用FIXED_HEIGHT和FI
      <a class="read-more" href="/2016/11/16/cocos%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D%E7%AD%96%E7%95%A5/"> ... </a>
    </div>
    <div class="post-item-extra">
      <div class="date">2016.11.16</div>
      <div class="tags">
        
        <div class="tag-item">cocos</div>
        
      </div>
    </div>
  </section>
  
</div>


<div class="paginator">
  <a class="extend prev" rel="prev" href="/page/8/">上一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/7/">7</a><a class="page-number" href="/page/8/">8</a><span class="page-number current">9</span><a class="page-number" href="/page/10/">10</a><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/10/">下一页</a>
</div>

  </main>
  <footer class="footer">
  
  <span>Copyright © 2024 typo</span>
  
</footer>
  
<script src="/js/theme.js"></script>

</body>

</html>